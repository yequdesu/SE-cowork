/* ==================== 
   全局风格定义 
   ==================== */
   page {
    /* 核心色板 */
    --primary: #3B82F6;
    --primary-light: #EFF6FF;
    --primary-dark: #2563EB;
    
    --text-main: #111827;
    --text-secondary: #6B7280;
    --text-tertiary: #9CA3AF;
    --bg-page: #F3F4F6;
    --bg-card: #FFFFFF;
  
    /* 排行榜专属金属色 */
    --gold-start: #FCD34D;
    --gold-end: #F59E0B;
    --silver-start: #E5E7EB;
    --silver-end: #9CA3AF;
    --bronze-start: #FDBA74;
    --bronze-end: #C2410C;
  
    /* 阴影与圆角 */
    --shadow-sm: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
    --shadow-md: 0 8rpx 24rpx rgba(0, 0, 0, 0.06);
    --radius-md: 16rpx;
    --radius-lg: 24rpx;
    
    background-color: var(--bg-page);
    font-family: -apple-system, "PingFang SC", "Helvetica Neue", sans-serif;
    box-sizing: border-box;
    padding-bottom: 80rpx;
  }
  
  .container {
    padding: 40rpx;
    min-height: 100vh;
  }
  
  /* ==================== 
     Header 
     ==================== */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 60rpx;
    padding-top: 20rpx;
  }

  .header-buttons {
    display: flex;
    gap: 20rpx;
  }
  
  .page-title {
    font-size: 56rpx;
    font-weight: 800;
    color: var(--text-main);
    letter-spacing: -1rpx;
    line-height: 1.1;
    display: block;
  }
  
  .page-subtitle {
    font-size: 26rpx;
    color: var(--text-tertiary);
    margin-top: 8rpx;
    display: block;
  }
  
  .btn-export, .btn-refresh {
    width: 80rpx;
    height: 80rpx;
    background: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-sm);
    color: var(--primary);
    font-size: 36rpx;
    font-weight: bold;
    transition: all 0.3s;
  }
  
  .btn-hover {
    transform: scale(0.9);
    background: var(--primary-light);
  }
  
  .spinning {
    animation: spin 1s linear infinite;
    display: inline-block;
  }
  
  /* ==================== 
     Loading 
     ==================== */
  .loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding-top: 200rpx;
    color: var(--text-secondary);
    font-size: 28rpx;
  }
  
  .spinner-ring {
    width: 60rpx;
    height: 60rpx;
    border: 6rpx solid #E5E7EB;
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-bottom: 30rpx;
  }
  
  /* ==================== 
     Podium (Top 3) 
     ==================== */
  .podium-section {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    margin-bottom: 80rpx;
    position: relative;
    padding: 40rpx 0;
  }
  
  .podium-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    width: 200rpx;
    z-index: 1;
  }
  
  /* 阶梯高低差 */
  .rank-1 { z-index: 2; padding-bottom: 30rpx; }
  .rank-2 { margin-right: -20rpx; } 
  .rank-3 { margin-left: -20rpx; }
  
  .crown-icon {
    font-size: 50rpx;
    margin-bottom: -10rpx;
    animation: float 3s ease-in-out infinite;
    z-index: 3;
  }
  
  .avatar-wrapper {
    position: relative;
    border-radius: 50%;
    padding: 6rpx;
    background: #fff;
    box-shadow: 0 10rpx 30rpx rgba(0,0,0,0.1);
  }
  
  /* 金属渐变边框 */
  .ring-gold { background: linear-gradient(135deg, var(--gold-start), var(--gold-end)); }
  .ring-silver { background: linear-gradient(135deg, var(--silver-start), var(--silver-end)); }
  .ring-bronze { background: linear-gradient(135deg, var(--bronze-start), var(--bronze-end)); }
  
  .avatar {
    width: 100rpx;
    height: 100rpx;
    background: #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40rpx;
    font-weight: bold;
    color: var(--text-main);
    border: 4rpx solid #fff;
  }
  
  .avatar.large {
    width: 130rpx;
    height: 130rpx;
    font-size: 50rpx;
  }
  
  .badge-rank {
    position: absolute;
    bottom: -10rpx;
    left: 50%;
    transform: translateX(-50%);
    width: 40rpx;
    height: 40rpx;
    background: #fff;
    border-radius: 50%;
    font-size: 24rpx;
    font-weight: 800;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.1);
    color: var(--text-secondary);
  }
  
  .rank-1 .badge-rank { color: #D97706; }
  .rank-2 .badge-rank { color: #6B7280; }
  .rank-3 .badge-rank { color: #B45309; }
  
  .name {
    margin-top: 20rpx;
    font-size: 26rpx;
    font-weight: 600;
    color: var(--text-main);
    max-width: 160rpx;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  
  .name.main-name { font-size: 30rpx; font-weight: 700; }
  
  .score {
    font-size: 28rpx;
    color: var(--text-secondary);
    font-family: "DIN Alternate", sans-serif;
  }
  .score.main-score { font-size: 36rpx; color: var(--primary); font-weight: bold; }
  
  .shine-effect {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
    animation: shine-pulse 2s infinite;
  }
  
  /* ==================== 
     Chart Section (柱状图修复)
     ==================== */
  .section-card {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    padding: 32rpx;
    box-shadow: var(--shadow-md);
    margin-bottom: 40rpx;
  }
  
  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30rpx;
  }
  
  .section-title {
    font-size: 32rpx;
    font-weight: 700;
    color: var(--text-main);
  }
  
  .section-tag {
    font-size: 22rpx;
    background: var(--primary-light);
    color: var(--primary);
    padding: 4rpx 12rpx;
    border-radius: 8rpx;
    font-weight: 600;
  }
  
  .chart-scroll {
    width: 100%;
    height: 320rpx;
  }
  
  .chart-container {
    display: flex;
    align-items: flex-end;
    padding-bottom: 10rpx;
    min-width: 100%;
  }
  
  .bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-right: 24rpx;
    width: 60rpx;
    flex-shrink: 0;
  }
  
  .bar-value {
    font-size: 20rpx;
    color: var(--text-tertiary);
    margin-bottom: 8rpx;
    opacity: 0;
    transform: translateY(10rpx);
    transition: all 0.3s;
  }
  
  .bar-group:active .bar-value {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* 轨道高度固定，内容高度由百分比决定 */
  .bar-track {
    height: 220rpx; 
    width: 100%;
    display: flex;
    align-items: flex-end;
    justify-content: center; /* 居中对齐柱子 */
  }
  
  .bar-fill {
    width: 16rpx;
    border-radius: 20rpx;
    min-height: 8rpx; /* 最小高度，防止0分完全消失 */
    transition: height 1s cubic-bezier(0.2, 0.8, 0.2, 1);
  }
  
  .fill-hot { background: linear-gradient(to top, var(--gold-end), var(--gold-start)); }
  .fill-cool { background: linear-gradient(to top, var(--primary-dark), #60A5FA); }
  
  .bar-label {
    margin-top: 12rpx;
    font-size: 20rpx;
    color: var(--text-secondary);
    width: 100%;
    text-align: center;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  
  /* ==================== 
     List Section (列表样式修复)
     ==================== */
  .list-header {
    display: flex;
    padding: 0 24rpx 20rpx;
    font-size: 24rpx;
    color: var(--text-tertiary);
  }
  .align-left { flex: 1; padding-left: 20rpx; }
  .align-right { width: 120rpx; text-align: right; }
  
  .rank-row {
    display: flex;
    align-items: center;
    background: var(--bg-card);
    padding: 24rpx;
    margin-bottom: 20rpx;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
    transition: all 0.2s;
  }
  
  .row-hover {
    transform: scale(0.98);
    background: #F9FAFB;
  }
  
  .col-rank {
    width: 60rpx;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  /* 统一排名的基础容器样式 */
  .rank-num {
    width: 44rpx;
    height: 44rpx;
    /* 使用 Flex 实现完美居中，替代 line-height */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28rpx;
    font-weight: 600;
    color: var(--text-secondary);
    border-radius: 12rpx;
  }
  
  /* 普通排名样式 */
  .normal-rank {
    background: transparent;
    color: var(--text-tertiary);
    font-weight: 600;
  }
  
  /* 前三名特殊样式 */
  .rank-num.top-rank { 
    color: #fff; 
    font-size: 24rpx; 
    box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.15); 
  }
  
  .rank-num.rank-1 { background: linear-gradient(135deg, var(--gold-start), var(--gold-end)); }
  .rank-num.rank-2 { background: linear-gradient(135deg, var(--silver-start), var(--silver-end)); }
  .rank-num.rank-3 { background: linear-gradient(135deg, var(--bronze-start), var(--bronze-end)); }
  
  .col-info {
    flex: 1;
    display: flex;
    align-items: center;
    padding-left: 20rpx;
  }
  
  .row-avatar {
    width: 70rpx;
    height: 70rpx;
    border-radius: 50%;
    background: #F3F4F6;
    color: var(--text-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 30rpx;
    font-weight: bold;
    margin-right: 20rpx;
    flex-shrink: 0;
  }
  
  .info-text {
    display: flex;
    flex-direction: column;
  }
  
  .student-name {
    font-size: 30rpx;
    font-weight: 600;
    color: var(--text-main);
  }
  
  .student-count {
    font-size: 22rpx;
    color: var(--text-tertiary);
    margin-top: 4rpx;
  }
  
  .col-score {
    width: 120rpx;
    text-align: right;
  }
  
  .score-num {
    font-size: 32rpx;
    font-weight: 800;
    color: var(--primary);
    font-family: -apple-system, sans-serif;
  }
  
  /* ==================== 
     Animation 
     ==================== */
  @keyframes spin { to { transform: rotate(360deg); } }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10rpx); }
  }
  @keyframes shine-pulse {
    0% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.1); }
    100% { opacity: 0.5; transform: scale(1); }
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(30rpx); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .slide-up { opacity: 0; animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
  .fade-in { animation: fadeIn 0.8s ease forwards; }